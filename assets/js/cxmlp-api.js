/*! CITIZEN XMP Print API v1.02(2016-07-12)  Copyright(C) 2015-2016 CITIZEN SYSTEMS JAPAN CO.,LTD. */(function(aa){var ba=102;var ca='1.02';var da=/^(Left|Center|Right)$/;var ea=/^(Upc[ae]|[EJ]an13|[EJ]an8|Code(39|93|128|128Parsed)|Itf|Codabar|Rss(14|Expanded)|Gs1DataBar|Gs1DataBar(Expanded|Truncated|Limited))$/;var fa=/^(Stacked|ExpandedStacked|StackedOmnidirectional)$/;var ga=/^(None|Above|Below)$/;var ha=/^(Level[012345678])$/;var ia=/^(Level[LMQH])$/;var ja=/^(Asis)$/;var ka=/^(Left|Right)$/;var la=/^(Transaction|Normal)$/;var ma=/^(Cutter|NextTof)$/;var na=/^(Full|Partial|FullPrefeed|PartialPrefeed)$/;var oa=/^(Drawer[12])$/;var pa=/^(PageMode|Normal|Cancel)$/;var qa=/^(Mono|Gray)$/;var ra=/^(LeftToRight|BottomToTop|RightToLeft|TopToBottom)$/;var sa=1;var ta=0;var ua=[0,0];var va="";var wa=function(s){var xa=/[<>&'"\t\n\r]/g;if(xa.test(s)){s=s.replace(xa,function(c){var r="";switch(c){case "<":r="&lt;";break;case ">":r="&gt;";break;case "&":r="&amp;";break;case "'":r="&apos;";break;case '"':r="&quot;";break;case "\t":r="&#9;";break;case "\n":r="&#10;";break;case "\r":r="&#13;";break;default:break;}return r;});}return s;};var ya=function(s){var za=/[\\\x00-\x1f\x7f-\xff]/g;if(za.test(s)){s=s.replace(za,function(c){return(c=="\\")?"\\\\":"\\x"+("0"+c.charCodeAt(0).toString(16)).slice(-2);});}return s;};var Aa=function(Ba,Ca,Da){if(!Da.test(Ca)){throw new Error('Parameter "'+Ba+'" is invalid');}return Ca;};var Ea=function(Fa,Ga,Ha,Ia){if(isNaN(Ga)||Ga<Ha||Ga>Ia){throw new Error('Parameter "'+Fa+'" is invalid');}return Ga;};var Ja=function(Ka,La){return Ea(Ka,La,0,255);};var Ma=function(Na,Oa){return Ea(Na,Oa,0,65535);};var Pa=function(Qa,Ra){return Ea(Qa,Ra,-32768,32767);};var Sa=function(Ta,Ua){return Ea(Ta,Ua,0,4294967295);};var Va=function(Wa,Xa){if(!Wa){return Wa;}Wa=Wa.replace(/></g,function(Ya,Za,s){var ch=s.substr(Za,8);if(ch=='></Data>'){return Ya;}else{return ">\n<";}});Wa=Wa.replace(/<s:Body>/g," <s:Body>");Wa=Wa.replace(/<\/s:Body>/g," </s:Body>");if(Xa==0){Wa=Wa.replace(/<POSPrinterRequest/g,"  <POSPrinterRequest");Wa=Wa.replace(/<\/POSPrinterRequest>/g,"  </POSPrinterRequest>");var $a=["<PrintText>","</PrintText>","<PrintPaddingText>","</PrintPaddingText>","<PrintMemoryBitmap>","</PrintMemoryBitmap>","<PrintNVBitmap>","</PrintNVBitmap>","<SetNVBitmap>","</SetNVBitmap>","<PrintBarCode>","</PrintBarCode>","<PrintPDF417>","</PrintPDF417>","<PrintQRCode>","</PrintQRCode>","<PrintGS1DataBarStacked>","</PrintGS1DataBarStacked>","<CutPaper>","</CutPaper>","<UnitFeed>","</UnitFeed>","<MarkFeed>","</MarkFeed>","<PageModePrint>","</PageModePrint>","<SetPageModePrintArea>","</SetPageModePrintArea>","<SetPageModePrintDirection>","</SetPageModePrintDirection>","<SetPageModeHorizontalPosition>","</SetPageModeHorizontalPosition>","<SetPageModeVerticalPosition>","</SetPageModeVerticalPosition>","<ClearPrintArea>","</ClearPrintArea>","<OpenDrawer>","</OpenDrawer>","<PrintData>","</PrintData>","<ClearOutput>","</ClearOutput>","<RotatePrint>","</RotatePrint>","<SetEncoding>","</SetEncoding>","<SetCodePage>","</SetCodePage>","<SetInternationalCharacterset>","</SetInternationalCharacterset>","<SetRecLineSpacing>","</SetRecLineSpacing>","<GetDeviceInfo","<MessageID>"];for(var i=0,len=$a.length;i<len;i++){Wa=Wa.replace(new RegExp($a[i],'g'),"   "+$a[i]);}var ab=["<DeviceName>","<Timeout>","<Data>","<Alignment>","<Attribute>","<TextSize>","<Length>","<Side>","<FileName>","<Width>","<NvImageNumber>","<Symbology>","<Height>","<TextPosition>","<Digits>","<Steps>","<ModuleWidth>","<StepHeight>","<EcLevel>","<ModuleSize>","<Percentage>","<UfCount>","<Type>","<Control>","<PageModePrintArea>","<PageModePrintDirection>","<PageModeHorizontalPosition>","<PageModeVerticalPosition>","<Drawer>","<PulseLength>","<Rotation>","<RecLineSpacing>","<MaxSize>","<Mode>","<Encode>","<CodePage>","<Characterset>"];for(var i=0,len=ab.length;i<len;i++){Wa=Wa.replace(new RegExp(ab[i],'g'),"    "+ab[i]);}}else{Wa=Wa.replace(/<POSPrinterResponse/g,"  <POSPrinterResponse");Wa=Wa.replace(/<\/POSPrinterResponse>/g,"  </POSPrinterResponse>");var $a=["<Response","</Response>","<GetDeviceInfo>","</GetDeviceInfo>","<MessageID>"];for(var i=0,len=$a.length;i<len;i++){Wa=Wa.replace(new RegExp($a[i],'g'),"   "+$a[i]);}var ab=["<RequestID>","<BusinessError","</BusinessError>","<Device"];for(var i=0,len=ab.length;i<len;i++){Wa=Wa.replace(new RegExp(ab[i],'g'),"    "+ab[i]);}var bb=["<Code>","<Description>"];for(var i=0,len=bb.length;i<len;i++){Wa=Wa.replace(new RegExp(bb[i],'g'),"     "+bb[i]);}}return Wa;};var cb=function(){var db=null;if(aa.XMLHttpRequest){db=new XMLHttpRequest();}else if(aa.ActiveXObject){try{db=new ActiveXObject("msxml2.XMLHTTP");}catch(e){db=new ActiveXObject("Microsoft.XMLHTTP");}}return db;};var eb=function(fb){if((typeof(fb.text)!="undefined")&&(fb.text!=null)){return fb.text;}else if((typeof(fb.textContent)!="undefined")&&(fb.textContent!=null)){return fb.textContent;}else{if(fb.firstChild!=null){return fb.firstChild.nodeValue;}else{return "";}}};var gb=function(hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb){if(hb.OnReceive){var sb=Va(rb,1);hb.OnReceive({MajorVersion:ib,MessageID:jb,ResponseCode:kb,RequestID:lb,ErrorCode:nb,Description:ob,DeviceInfo:pb},sb);}};var tb=function(ub,vb,wb){if(ub.OnError){ub.OnError({status:vb,responseText:wb});}};var xb=function(yb,zb,Ab){var Bb,node2,node3;var Cb=0;var Db="";var Eb="";var Fb="";var Gb="";var Hb="";var Ib="";var Jb=new Array();var Kb=new Array();var Lb="";var Mb="";if(!zb){gb(yb,'','','','','','','Response data is null.',Jb,Kb);return;}Bb=zb.getElementsByTagName("POSPrinterResponse");if(Bb.length==0){gb(yb,'','','','','','','POSPrinterResponse is not.',Jb,Kb);return;}Cb=Bb[0].getAttribute("MajorVersion");if(Bb[0].getElementsByTagName("MessageID").length!=0){Db=eb(Bb[0].getElementsByTagName("MessageID")[0]);}node2=Bb[0].getElementsByTagName("Response")[0];Eb=node2.getAttribute("ResponseCode");Fb=eb(node2.getElementsByTagName("RequestID")[0]);if(Eb=="Rejected"){if(node2.getElementsByTagName("BusinessError").length!=0){node3=node2.getElementsByTagName("BusinessError")[0];if(node3.getAttribute("Severity").length!=0){Gb=node3.getAttribute("Severity");}if(node3.getElementsByTagName("Code").length!=0){Hb=eb(node3.getElementsByTagName("Code")[0]);}if(node3.getElementsByTagName("Description").length!=0){Ib=eb(node3.getElementsByTagName("Description")[0]);}}}if(Bb[0].getElementsByTagName("GetDeviceInfo").length!=0){node2=Bb[0].getElementsByTagName("GetDeviceInfo")[0];var Nb=node2.getElementsByTagName("Device").length;if(Nb!=0){for(i=0;i<Nb;i++){Lb=node2.getElementsByTagName("Device")[i].getAttribute("Name");Mb=node2.getElementsByTagName("Device")[i].getAttribute("Status");Jb.push({name:Lb,status:Mb});}}}if(Bb[0].getElementsByTagName("GetImageFileInfo").length!=0){node2=Bb[0].getElementsByTagName("GetImageFileInfo")[0];var Nb=node2.getElementsByTagName("ImageFile").length;if(Nb!=0){for(i=0;i<Nb;i++){Lb=node2.getElementsByTagName("ImageFile")[i].getAttribute("Name");Kb.push({name:Lb});}}}gb(yb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Ab);};var Ob=function(Pb,Qb,Rb){var Sb=[2032,14400,10000,25400];var Tb=Pb;var Ub=Qb-1;var to=Rb-1;if(Ub==to){return Tb;}else{Tb=Tb*Sb[to]/Sb[Ub];Tb=Math.round(Tb);return Tb;}};var Vb=function(Wb){return Ob(Wb,sa,1);};var Xb=function(Yb){return Ob(Yb,1,sa);};var Zb=function($b,ac){if(ac.status==200){xb($b,ac.responseXML,ac.responseText);}else{tb($b,ac.status,ac.responseText);}};var bc={None:0,Dither1:1,Dither2:2,Dither3:3,RandomDither1:4,RandomDither2:5,Hatching:6};var cc={Format1bppIndexed:1,Format2bppIndexed:2,Format4bppIndexed:4,Format8bppIndexed:8,Format24bppRgb:24,Format32bppArgb:32,Format1bppGray:0x101,Format2bppGray:0x102,Format4bppGray:0x104,Format8bppGray:0x108,Undefined:0};var dc=function(ec,fc){var gc;switch(ec){case cc.Format1bppIndexed:case cc.Format1bppGray:gc=1;break;case cc.Format4bppIndexed:case cc.Format4bppGray:gc=4;break;case cc.Format8bppIndexed:case cc.Format8bppGray:gc=8;break;case cc.Format24bppRgb:gc=24;break;case cc.Format32bppArgb:gc=32;break;default:return null;}var hc=Math.ceil(fc*gc/32)*4;return hc;};var ic=function(jc,kc,lc){var mc=dc(jc,kc);if(mc!=null){return mc*lc;}return null;};var nc=function(oc,pc,qc){var rc;switch(oc){case cc.Format1bppIndexed:rc=0xff;break;case cc.Format4bppIndexed:rc=0x11;break;case cc.Format8bppIndexed:rc=0x01;break;default:return;}for(var sc=0;sc<0x100;sc+=rc){pc[qc++]=sc;pc[qc++]=sc;pc[qc++]=sc;pc[qc++]=0;}};var tc=function(uc,vc,wc){var xc=14;var yc=40;var zc=xc+yc;var Ac;switch(uc){case cc.Format1bppIndexed:Ac=2;break;case cc.Format4bppIndexed:Ac=16;break;case cc.Format8bppIndexed:Ac=256;break;case cc.Format24bppRgb:case cc.Format32bppArgb:Ac=0;break;default:return null;}var Bc=zc+Ac*4;var Cc=ic(uc,vc,wc);var Dc=Cc+Bc;var Ec=8000;var Fc=new Uint8Array(Bc);Fc[0]=Number("B".charCodeAt(0));Fc[1]=Number("M".charCodeAt(0));Fc[2]=(Dc>>0)&0xff;Fc[3]=(Dc>>8)&0xff;Fc[4]=(Dc>>16)&0xff;Fc[5]=(Dc>>24)&0xff;Fc[6]=0;Fc[7]=0;Fc[8]=0;Fc[9]=0;Fc[10]=(Bc>>0)&0xff;Fc[11]=(Bc>>8)&0xff;Fc[12]=(Bc>>16)&0xff;Fc[13]=(Bc>>24)&0xff;Fc[14]=yc;Fc[15]=0;Fc[16]=0;Fc[17]=0;Fc[18]=(vc>>0)&0xff;Fc[19]=(vc>>8)&0xff;Fc[20]=(vc>>16)&0xff;Fc[21]=(vc>>24)&0xff;Fc[22]=(wc>>0)&0xff;Fc[23]=(wc>>8)&0xff;Fc[24]=(wc>>16)&0xff;Fc[25]=(wc>>24)&0xff;Fc[26]=1;Fc[27]=0;Fc[28]=uc&0xff;Fc[29]=0;Fc[30]=0;Fc[31]=0;Fc[32]=0;Fc[33]=0;Fc[34]=(Cc>>0)&0xff;Fc[35]=(Cc>>8)&0xff;Fc[36]=(Cc>>16)&0xff;Fc[37]=(Cc>>24)&0xff;Fc[38]=(Ec>>0)&0xff;Fc[39]=(Ec>>8)&0xff;Fc[40]=(Ec>>16)&0xff;Fc[41]=(Ec>>24)&0xff;Fc[42]=(Ec>>0)&0xff;Fc[43]=(Ec>>8)&0xff;Fc[44]=(Ec>>16)&0xff;Fc[45]=(Ec>>24)&0xff;Fc[46]=(Ec>>0)&0xff;Fc[47]=(Ec>>8)&0xff;Fc[48]=(Ec>>16)&0xff;Fc[49]=(Ec>>24)&0xff;Fc[50]=(Ec>>0)&0xff;Fc[51]=(Ec>>8)&0xff;Fc[52]=(Ec>>16)&0xff;Fc[53]=(Ec>>24)&0xff;if(Ac>0){nc(uc,Fc,zc);}return Fc;};var Gc=function(Hc){var Ic=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'];var Jc="";var Kc=new Uint8Array(Hc);var Lc=Kc.length;var n=0;var b=0;var i=0;while(i<Lc){b=Kc[i];Jc+=Ic[(b>>2)];n=(b&0x03)<<4;i++;if(i>=Lc)break;b=Kc[i];Jc+=Ic[n|(b>>4)];n=(b&0x0f)<<2;i++;if(i>=Lc)break;b=Kc[i];Jc+=Ic[n|(b>>6)];Jc+=Ic[(b&0x3f)];i++;}var m=Lc%3;if(m){Jc+=Ic[n];}if(m==1){Jc+="==";}else if(m==2){Jc+="=";}return Jc;};var Mc=function(Nc){var Oc=new Object();Oc[0x41]=0;Oc[0x42]=1;Oc[0x43]=2;Oc[0x44]=3;Oc[0x45]=4;Oc[0x46]=5;Oc[0x47]=6;Oc[0x48]=7;Oc[0x49]=8;Oc[0x4a]=9;Oc[0x4b]=10;Oc[0x4c]=11;Oc[0x4d]=12;Oc[0x4e]=13;Oc[0x4f]=14;Oc[0x50]=15;Oc[0x51]=16;Oc[0x52]=17;Oc[0x53]=18;Oc[0x54]=19;Oc[0x55]=20;Oc[0x56]=21;Oc[0x57]=22;Oc[0x58]=23;Oc[0x59]=24;Oc[0x5a]=25;Oc[0x61]=26;Oc[0x62]=27;Oc[0x63]=28;Oc[0x64]=29;Oc[0x65]=30;Oc[0x66]=31;Oc[0x67]=32;Oc[0x68]=33;Oc[0x69]=34;Oc[0x6a]=35;Oc[0x6b]=36;Oc[0x6c]=37;Oc[0x6d]=38;Oc[0x6e]=39;Oc[0x6f]=40;Oc[0x70]=41;Oc[0x71]=42;Oc[0x72]=43;Oc[0x73]=44;Oc[0x74]=45;Oc[0x75]=46;Oc[0x76]=47;Oc[0x77]=48;Oc[0x78]=49;Oc[0x79]=50;Oc[0x7a]=51;Oc[0x30]=52;Oc[0x31]=53;Oc[0x32]=54;Oc[0x33]=55;Oc[0x34]=56;Oc[0x35]=57;Oc[0x36]=58;Oc[0x37]=59;Oc[0x38]=60;Oc[0x39]=61;Oc[0x2b]=62;Oc[0x2f]=63;var Pc=Nc.length;var n=0;var b=0;var e;if(!Pc)return(new ArrayBuffer(0));if(Pc<4)return null;if(Pc%4)return null;e=Pc/4*3;if(Nc.charAt(Pc-1)=='=')e-=1;if(Nc.charAt(Pc-2)=='=')e-=1;var Qc=new ArrayBuffer(e);var Rc=new Uint8Array(Qc);var i=0;var p=0;while(p<e){b=Oc[Nc.charCodeAt(i)];if(b===undefined)return null;n=(b<<2);i++;b=Oc[Nc.charCodeAt(i)];if(b===undefined)return null;Rc[p]=n|((b>>4)&0x3);n=(b&0x0f)<<4;i++;p++;if(p>=e)break;b=Oc[Nc.charCodeAt(i)];if(b===undefined)return null;Rc[p]=n|((b>>2)&0xf);n=(b&0x03)<<6;i++;p++;if(p>=e)break;b=Oc[Nc.charCodeAt(i)];if(b===undefined)return null;Rc[p]=n|b;i++;p++;}return Qc;};var Sc=function(Tc){var Uc=[0xff,0xd8];var Vc=[0xff,0xd9];if(Tc.length<(Uc.length+Vc.length)){return false;}for(var i=0;i<Uc.length;i++){if(Tc[i]!=Uc[i]){return false;}}var Wc=Tc.length-Vc.length;for(var i=0;i<Vc.length;i++){if(Tc[Wc++]!=Vc[i]){return false;}}return true;};var Xc=function(Yc){var Zc=[0x89,0x50,0x4e,0x47,0x0d,0x0a,0x1a,0x0a];if(Yc.length<Zc.length){return false;}for(var i=0;i<Zc.length;i++){if(Yc[i]!=Zc[i]){return false;}}return true;};var $c=function(ad){var bd=[0x47,0x49,0x46,0x38];if(ad.length<bd.length){return false;}for(var i=0;i<bd.length;i++){if(ad[i]!=bd[i]){return false;}}return true;};var cd=function(dd){var ed=[0x42,0x4D];if(dd.length<ed.length){return false;}for(var i=0;i<ed.length;i++){if(dd[i]!=ed[i]){return false;}}return true;};var fd=function(gd){var hd;if(Sc(gd)){hd="data:image/jpeg;base64,";}else if(Xc(gd)){hd="data:image/png;base64,";}else if($c(gd)){hd="data:image/gif;base64,";}else if(cd(gd)){hd="data:image/bmp;base64,";}else{hd="data:image/unknown;base64,";}return hd;};var id=function(jd){if(!Xc(jd))return null;var kd=0x10;var ld=0;ld+=jd[kd++]<<24;ld+=jd[kd++]<<16;ld+=jd[kd++]<<8;ld+=jd[kd++]<<0;return ld;};var md=function(nd){if(!Xc(nd))return null;var od=0x14;var pd=0;pd+=nd[od++]<<24;pd+=nd[od++]<<16;pd+=nd[od++]<<8;pd+=nd[od++]<<0;return pd;};var qd=function(rd){if(!Xc(rd))return null;var sd=rd[0x18];var td=rd[0x19];switch(td){case 6:switch(sd){case 16:break;case 8:return cc.Format32bppArgb;default:break;}break;case 4:switch(sd){case 16:break;case 8:break;default:break;}break;case 3:switch(sd){case 8:return cc.Format8bppIndexed;case 4:return cc.Format4bppIndexed;case 2:return cc.Format2bppIndexed;case 1:return cc.Format1bppIndexed;default:break;}break;case 2:switch(sd){case 16:break;case 8:return cc.Format24bppRgb;default:break;}break;case 0:switch(sd){case 16:break;case 8:return cc.Format8bppGray;case 4:return cc.Format4bppGray;case 2:return cc.Format2bppGray;case 1:return cc.Format1bppGray;default:break;}break;default:break;}return cc.Undefined;};var ud=function(vd,wd,xd,yd){var zd=wd;var Ad;if(yd==true){Ad=dc(cc.Format4bppIndexed,wd);}else{Ad=parseInt((wd+1)/2,10);}var Bd=new Uint8ClampedArray(Ad*xd);for(var y=0,srcXref=0,dstXref=0;y<xd;y++,srcXref+=zd,dstXref+=Ad){var Cd=dstXref;for(var x=0;x<wd;x++){var Dd=vd[srcXref+x];Dd&=0xf0;if(yd==false){Dd=0xf0-Dd;}if(0==(x%2)){Bd[Cd]=Dd;}else{Bd[Cd]|=Dd>>4;Cd++;}}}return Bd;};var Ed=function(Fd,Gd,Hd,Id){var Jd=new Uint8ClampedArray([0x7F,0xBF,0xDF,0xEF,0xF7,0xFB,0xFD,0xFE]);var Kd=0x7F;var Ld=Gd;var Md;if(Id==true){Md=parseInt((Gd+31)/32,10)*4;Md=dc(cc.Format1bppIndexed,Gd);}else{Md=parseInt((Gd+7)/8,10);}var Nd=new Uint8ClampedArray(Md*Hd);for(var y=0,srcXref=0,dstXref=0;y<Hd;y++,srcXref+=Ld,dstXref+=Md){var Od=dstXref;for(var x=0;x<Gd;x+=8){var Pd=0xFF;for(var Qd=0;Qd<8;Qd++){if((x+Qd)<Gd){var Rd=Fd[srcXref+x+Qd];if(Rd<=Kd){Pd&=Jd[Qd];}}}if(Id==false){Pd=0xff&(0xFF-Pd);}Nd[Od++]=Pd;}}return Nd;};var Sd=function(Td,Ud,Vd){var Wd=new Uint8ClampedArray(Ud*Vd);for(var i=0;i<Vd;i++){for(var j=0;j<Ud;j++){var Xd=(j+i*Ud)*4;var Yd=new Uint8ClampedArray([Td[Xd+0]*0.298912+Td[Xd+1]*0.586611+Td[Xd+2]*0.114478]);alpha=Td[Xd+3];backColor=255;Yd[0]=(Yd[0]*alpha/255)+(backColor-alpha);Wd[Xd/4]=Yd[0];}}return Wd;};var Zd=function($d,ae,be){var ce=new Uint8ClampedArray(ae*be*4);var de=0;for(var y=0;y<be;y++){for(var x=0;x<ae;x++){var ee=de*4;ce[ee++]=$d[de];ce[ee++]=$d[de];ce[ee++]=$d[de];ce[ee++]=255;de++;}}return ce;};var fe=function(ge,he,ie,je,ke){ke=Math.round(ke);je=Math.round(je);var le=ie/ke;var me=he/je;var le=ie/ke;var me=he/je;var ne=new Uint8ClampedArray(dstStride*ke);for(var oe=0;oe<ke;oe++){var pe=Math.floor(le*oe);if(pe>=ie){break;}for(var qe=0;qe<je;qe++){var re=Math.floor(me*qe);var se=srcStride*pe+re;var te=dstStride*oe+qe;if((re>=he)||(se>=ge.length)||(te>=ne.length)){break;}ne[te]=ge[se];}}return ne;};var ue=function(ve,we,xe,ye,ze){var Ae=127;var Be=we;var Ce=we;var De=new Uint8ClampedArray(Be*xe);for(var y=0,srcXref=0;y<xe;y++,srcXref+=Be){for(var x=0;x<we;x++){var Ee=ve[srcXref+x];if(ye==16){Ee=calcDitherGradation(16,x,y,ze-bc.Dither1,Ee);}else{Ee=calcDitherGradation(2,x,y,ze-bc.Dither1,Ee);}De[srcXref+x]=Ee;}}return De;};var Fe=function(Ge,He,Ie,Je,Ke){var Le=[[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5],[11,4,6,9,12,0,2,14,7,8,10,5,3,15,13,1],[6,7,8,9,5,0,1,10,4,3,2,11,15,14,13,12]];var Me=Le[Je][(Ie%4)*4+(He%4)];var Ne=0;switch(Ge){case 2:Ne=((Me*16)-128)+Ke;break;case 4:Ne=((Me*8)-64)+Ke;break;case 8:Ne=((Me*4)-32)+Ke;break;case 16:Ne=((Me*2)-16)+Ke;break;default:break;}if(Ne<0){Ke=0;}else if(255<Ne){Ke=255;}else{Ke=Ne;}return Ke;};var Oe=new Uint8Array(256);var Pe=function(Qe,Re,Se,Te){var Ue;var Ve=255*Math.Pow((Te / 255), (1 / Qe));var We=(Ve-128)*Re+128;We+=Se;if(We<0){Ue=0;}else if(255<We){Ue=255;}else{Ue=We;}return Ue;};var Xe=function(Ye,Ze,$e){for(var af=0;af<256;af++){Oe[af]=Pe(Ye,Ze,$e,af);}};var bf=function(cf,df,ef,ff){var gf=0x7F;var hf=df;var jf=df;var kf=new Uint8ClampedArray(hf*ef);for(var y=0,srcXref=0,dstXref=0;y<ef;y++,srcXref+=hf,dstXref+=jf){for(var x=0;x<df;x++){var lf=cf[srcXref+x];if(ff==16){lf&=0xf0;if(lf==0xf0)lf=0xff;}else{lf=lf>gf?255:0;}kf[dstXref+x]=lf;}}return kf;};var mf=function(nf,of,pf,qf){var rf=[[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0x00],[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0x00],[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0x00],[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00],[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00],[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00],[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00],[0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00],[0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00],[0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00],[0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00],[0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00],[0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00],[0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff],[0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff],[0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff],[0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0x00,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff],[0x00,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff],[0x00,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff],[0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff]];if(qf!=0){var sf=qf;if(sf<0)sf=0;else if(sf>20)sf=20;pf|=rf[sf][(of%8)*8+(nf%8)];}return pf;};var tf=function(uf,vf,wf,yf,zf){var Af=127;var Bf=[[0/16.0,   0/16.0,7.0/16.0],[3.0/16.0, 5.0/16.0,1.0/16.0]];var Cf=[[0/48,   0/48,0/48, 7.0/48,5.0/48],[3.0/48, 5.0/48,7.0/48, 5.0/48,3.0/48],[1.0/48, 3.0/48,5.0/48, 3.0/48,1.0/48]];var Df;if(zf==bc.RandomDither1)Df=Bf;else Df=Cf;var my=Df[0].length;var mx=Df[1].length;var Ef=vf;var Ff=vf;var Gf=new Uint8ClampedArray(Ef*wf);var Hf=new Int32Array(wf*Ef);for(var y=0,srcXref=0;y<wf;y++,srcXref+=Ef){for(var x=0;x<Ef;x++){Hf[srcXref+x]=uf[srcXref+x];}}for(var y=0,srcXref=0,dstXref=0;y<wf;y++,srcXref+=Ef,dstXref+=Ff){for(var x=0;x<Ef;x++){var If=Hf[srcXref+x];var Jf;if(yf==16){if(If>255)If=255;if(If<0)If=0;Jf=If&0xf0;if(Jf==0xf0)Jf=0xff;}else{Jf=If>Af?255:0;}Gf[dstXref+x]=Jf;var Kf=If-Jf;for(var oy=0,iy=y;oy<my&&iy<wf;oy++,iy++){for(var ox=0,ix=x-(mx-1)/2;ox<mx&&ix<Ef;ox++,ix++){if(ix<0)continue;if(Df[oy][ox]==0.0)continue;var Lf=Hf[iy*ix]+Kf*Df[oy][ox];Hf[iy*ix]=Lf;}}}}return Gf;};var Mf=function(Nf,Of,Pf,Qf){if(Qf==0){return Nf;}var Rf=Of;var Sf=Of;var Tf=Sf*Pf;bgraValues=new Uint8ClampedArray(Tf);System.Runtime.InteropServices.Marshal.Copy(ptr,bgraValues,0,Tf);var x=0;var y=0;for(var Uf=0;Uf<bgraValues.Length;Uf+=4){var Vf=mf(x++,y,bgraValues[Uf+0],Qf);bgraValues[Uf+0]=Vf;bgraValues[Uf+1]=Vf;bgraValues[Uf+2]=Vf;if(x>=(bmpData.Stride/4)){x=0;y++;}}return bgraValues;};var Wf=function(Xf,Yf,Zf,$f){var ag=Yf;var bg=Yf;dstData=new Uint8ClampedArray(bg*Zf);for(var y=0,srcXref=0,dstXref=0;y<Zf;y++,srcXref+=ag,dstXref+=bg){for(var x=0;x<Yf;x++){var cg=Xf[srcXref+x+0];if($f!=0){cg=mf(x,y,cg,$f);}dstData[dstXref+x]=cg;}}return dstData;};var dg=function(eg,x,y,fg,gg,hg,ig){var jg=eg.getImageData(x,y,fg,gg);var kg=eg.createImageData(fg,gg);var lg=jg.data;var mg=kg.data;var ng=hg?16:2;var og;var pg;var qg=Sd(lg,fg,gg);if(ig){qg=new Uint8Array(ue(qg,fg,gg,ng,bc.Dither1));}if(hg){og=ud(qg,fg,gg,true);pg=tc(cc.Format4bppIndexed,fg,-gg);}else{og=Ed(qg,fg,gg,true);pg=tc(cc.Format1bppIndexed,fg,-gg);}var rg=new Uint8Array(pg.byteLength+og.byteLength);rg.set(new Uint8Array(pg),0);rg.set(new Uint8Array(og),pg.byteLength);return Gc(rg);};function CXMLPrint(){this.message="";this.OnReceive=null;this.OnError=null;this.BM_ASIS="Asis";this.PM_PAGE_MODE="PageMode";this.PM_NORMAL="Normal";this.PM_CANCEL="Cancel";this.RP_NORMAL=1;this.RP_ROTATE180=259;this.ALIGN_LEFT="Left";this.ALIGN_CENTER="Center";this.ALIGN_RIGHT="Right";this.SIDE_LEFT="Left";this.SIDE_RIGHT="Right";this.BCS_UPCA="Upca";this.BCS_UPCE="Upce";this.BCS_EAN8="Ean8";this.BCS_EAN13="Ean13";this.BCS_JAN8="Jan8";this.BCS_JAN13="Jan13";this.BCS_ITF="Itf";this.BCS_CODABAR="Codabar";this.BCS_CODE39="Code39";this.BCS_CODE93="Code93";this.BCS_CODE128="Code128";this.BCS_CODE128PARSED="Code128Parsed";this.BCS_RSS14="Rss14";this.BCS_RSS_EXPANDED="RssExpanded";this.BCS_GS1DATABAR="Gs1DataBar";this.BCS_GS1DATABAR_E="Gs1DataBarExpanded";this.BCS_GS1DATABAR_T="Gs1DataBarTruncated";this.BCS_GS1DATABAR_L="Gs1DataBarLimited";this.BCS_GS1DATABAR_S="Stacked";this.BCS_GS1DATABAR_E_S="ExpandedStacked";this.BCS_GS1DATABAR_S_O="StackedOmnidirectional";this.PDF417_EC_LEVEL_0="Level0";this.PDF417_EC_LEVEL_1="Level1";this.PDF417_EC_LEVEL_2="Level2";this.PDF417_EC_LEVEL_3="Level3";this.PDF417_EC_LEVEL_4="Level4";this.PDF417_EC_LEVEL_5="Level5";this.PDF417_EC_LEVEL_6="Level6";this.PDF417_EC_LEVEL_7="Level7";this.PDF417_EC_LEVEL_8="Level8";this.QRCODE_EC_LEVEL_L="LevelL";this.QRCODE_EC_LEVEL_M="LevelM";this.QRCODE_EC_LEVEL_Q="LevelQ";this.QRCODE_EC_LEVEL_H="LevelH";this.HRI_TEXT_NONE="None";this.HRI_TEXT_ABOVE="Above";this.HRI_TEXT_BELOW="Below";this.PD_LEFT_TO_RIGHT="LeftToRight";this.PD_BOTTOM_TO_TOP="BottomToTop";this.PD_RIGHT_TO_LEFT="RightToLeft";this.PD_TOP_TO_BOTTOM="TopToBottom";this.CUT_FULL="Full";this.CUT_PARTIAL="Partial";this.CUT_FULL_PREFEED="FullPrefeed";this.CUT_PARTIAL_PREFEED="PartialPrefeed";this.MF_TO_CUTTER="Cutter";this.MF_TO_NEXT_TOF="NextTof";this.DRAWER_1="Drawer1";this.DRAWER_2="Drawer2";this.TXT_1WIDTH=0;this.TXT_2WIDTH=16;this.TXT_3WIDTH=32;this.TXT_4WIDTH=48;this.TXT_5WIDTH=64;this.TXT_6WIDTH=80;this.TXT_7WIDTH=96;this.TXT_8WIDTH=112;this.TXT_1HEIGHT=0;this.TXT_2HEIGHT=1;this.TXT_3HEIGHT=2;this.TXT_4HEIGHT=3;this.TXT_5HEIGHT=4;this.TXT_6HEIGHT=5;this.TXT_7HEIGHT=6;this.TXT_8HEIGHT=7;this.BM_MONO="Mono";this.BM_GRAY="Gray";this.MM_DOTS=1;this.MM_TWIPS=2;this.MM_ENGLISH=3;this.MM_METRIC=4;sa=1;ta=576;ua[0]=ta;ua[1]=1662;va=this.PD_LEFT_TO_RIGHT;}CXMLPrint.prototype.Send=function(sg){var tg=arguments.length,request,pps=this;if(tg<1){throw new Error('Send Parameter is invalid');}else if(1<tg){request=arguments[1];}else{request=this.message;request='<POSPrinterRequest xmlns="http://www.citizen.co.jp/POSPrinter/" MajorVersion="1">'+request+"</POSPrinterRequest>";request='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body>'+request+"</s:Body></s:Envelope>";}if(sg==""){throw new Error('Send Parameter is invalid');}var ug=cb();ug.open("POST",sg,true);ug.setRequestHeader("Content-Type","text/xml; charset=UTF-8");ug.setRequestHeader("SOAPAction",'""');ug.onreadystatechange=function(){if(ug.readyState==4){Zb(pps,ug);}};ug.send(request);};CXMLPrint.prototype.ToString=function(){var vg=this.message;vg='<POSPrinterRequest xmlns="http://www.citizen.co.jp/POSPrinter/" MajorVersion="1">'+vg+"</POSPrinterRequest>";vg='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body>'+vg+"</s:Body></s:Envelope>";vg=Va(vg,0);return vg;};CXMLPrint.prototype.SetMapMode=function(wg){var xg;if((wg!=undefined)&&((wg==1)||(wg==2)||(wg==3)||(wg==4))){sa=wg;}else{throw new Error('SetMapMode Element is invalid');}return this;};CXMLPrint.prototype.GetMapMode=function(){return sa;};CXMLPrint.prototype.GetPageModePrintDirection=function(){return va;};CXMLPrint.prototype.PrintText=function(yg,zg,Ag,Bg){var s="";var Cg;if((yg!=undefined)&&(zg!=undefined)&&(Ag!=undefined)&&(Bg!=undefined)){s+="<Data>"+ya(wa(yg))+"</Data>";if(isNaN(zg)){Cg=Aa("Alignment",zg,da);}else{Cg=Pa("Alignment",zg);}s+="<Alignment>"+Cg+"</Alignment>";s+="<Attribute>"+Ja("Attribute",Ag)+"</Attribute>";s+="<TextSize>"+Ja("TextSize",Bg)+"</TextSize>";this.message+="<PrintText>"+s+"</PrintText>";}else{throw new Error('PrintText Element is invalid');}return this;};CXMLPrint.prototype.PrintPaddingText=function(Dg,Eg,Fg,Gg,Hg){var s="";var Ig;if((Dg!=undefined)&&(Eg!=undefined)&&(Fg!=undefined)&&(Gg!=undefined)&&(Hg!=undefined)){s+="<Data>"+ya(wa(Dg))+"</Data>";s+="<Attribute>"+Ja("Attribute",Eg)+"</Attribute>";s+="<TextSize>"+Ja("TextSize",Fg)+"</TextSize>";s+="<Length>"+Ma("Length",Gg)+"</Length>";if(isNaN(Hg)){Ig=Aa("Side",Hg,ka);}else{Ig=Ja("Side",Hg);}s+="<Side>"+Ig+"</Side>";this.message+="<PrintPaddingText>"+s+"</PrintPaddingText>";}else{throw new Error('PrintPaddingText Element is invalid');}return this;};CXMLPrint.prototype.PrintMemoryBitmap=function(Jg,Kg,Lg,Mg){var s="";var Ng;var Og;var Pg;if((Jg==undefined)||(Lg==undefined)){throw new Error('PrintMemoryBitmap Element is invalid');}s+="<Data>"+Jg+"</Data>";if(Kg==null||Kg==undefined){Kg="Asis";}if(isNaN(Kg)){Ng=Kg;}else{Ng=Pa("Width",Kg);}s+="<Width>"+Ng+"</Width>";if(isNaN(Lg)){Og=Aa("Alignment",Lg,da);}else{Og=Pa("Alignment",Lg);Og=Vb(Og);}s+="<Alignment>"+Og+"</Alignment>";if(Mg!=undefined){if(isNaN(Mg)){Pg=Aa("Mode",Mg,qa);}else{Pg=Pa("Mode",Mg);}s+="<Mode>"+Pg+"</Mode>";}this.message+="<PrintMemoryBitmap>"+s+"</PrintMemoryBitmap>";return this;};CXMLPrint.prototype.PrintCanvas2DContext=function(Qg,X,Y,Rg,Sg,Tg,Ug){var sx;var sy;var w;var h;var Vg;var Wg=this.BM_MONO;if((Qg==undefined)||(X==undefined)||(Y==undefined)||(Rg==undefined)||(Sg==undefined)||(Tg==undefined)){throw new Error('PrintCanvas2DContext Element is invalid');}if(isNaN(X)){throw new Error('PrintCanvas2DContext Element is invalid');}else{sx=Pa("X",X);}if(isNaN(Y)){throw new Error('PrintCanvas2DContext Element is invalid');}else{sy=Pa("Y",Y);}if(isNaN(Rg)){throw new Error('PrintCanvas2DContext Element is invalid');}else{w=Pa("Width",Rg);}if(isNaN(Sg)){throw new Error('PrintCanvas2DContext Element is invalid');}else{h=Pa("Height",Sg);}if(isNaN(Tg)){Vg=Aa("Alignment",Tg,da);}else{Vg=Pa("Alignment",Tg);}if(Ug!=undefined){if(isNaN(Ug)){Wg=Aa("Mode",Ug,qa);}else{throw new Error('PrintCanvas2DContext Element is invalid');}}var Xg=Wg==this.BM_GRAY?true:false;var Yg=dg(Qg,sx,sy,w,h,Xg,false);return this.PrintMemoryBitmap(Yg,this.BM_ASIS,Vg,Wg);};CXMLPrint.prototype.PrintImage=function(Zg,$g,ah,bh){var w;var h;var dh;var eh=this.BM_MONO;if((Zg==undefined)||($g==undefined)||(ah==undefined)){throw new Error('PrintImage Element is invalid');}if(Zg.width==0||Zg.height==0){throw new Error('PrintImage Element is invalid');}if(isNaN($g)){var fh=Aa("Width",$g,ja);w=Zg.width;}else{w=Pa("Width",$g);w=Vb(w);}if(isNaN(ah)){dh=Aa("Alignment",ah,da);}else{dh=Pa("Alignment",ah);}if(bh!=undefined){if(isNaN(bh)){eh=Aa("Mode",bh,qa);}else{throw new Error('PrintImage Element is invalid');}}h=Math.round(Zg.height*w/Zg.width);var gh=document.createElement("canvas");var hh=gh.getContext('2d');gh.width=w;gh.height=h;hh.drawImage(Zg,0,0,w,h);var ih=eh==this.BM_GRAY?true:false;var jh=dg(hh,0,0,gh.width,gh.height,ih,false);return this.PrintMemoryBitmap(jh,this.BM_ASIS,dh,eh);};CXMLPrint.prototype.PrintNVBitmap=function(kh,lh){var s="";if(kh==undefined){throw new Error('PrintNVBitmap Element is invalid');}s+="<NvImageNumber>"+Ja("NvImageNumber",kh)+"</NvImageNumber>";if(lh!=undefined){if(isNaN(lh)){alig=Aa("Alignment",lh,da);}else{alig=Pa("Alignment",lh);alig=Vb(alig);}s+="<Alignment>"+alig+"</Alignment>";}this.message+="<PrintNVBitmap>"+s+"</PrintNVBitmap>";return this;};CXMLPrint.prototype.SetNVBitmap=function(mh,nh,oh,ph){var s="";var qh;var rh;if(mh==undefined){throw new Error('SetNVBitmap Element is invalid');}s+="<NvImageNumber>"+Ja("NvImageNumber",mh)+"</NvImageNumber>";if(nh==null||nh==undefined){nh="";}s+="<Data>"+nh+"</Data>";if(oh==null||oh==undefined){oh="Asis";}if(isNaN(oh)){qh=oh;}else{qh=Pa("Width",oh);}s+="<Width>"+qh+"</Width>";if(ph!=undefined){if(isNaN(ph)){rh=Aa("Mode",ph,qa);}else{rh=Pa("Mode",ph);}s+="<Mode>"+rh+"</Mode>";}this.message+="<SetNVBitmap>"+s+"</SetNVBitmap>";return this;};isPrintBarCodeData=function(sh,th){var uh;var n=sh.length;if(isNaN(th)){uh=Aa("Symbology",th,ea);}else{uh=Ja("Symbology",th);}switch(uh){case 'Upca':case 'Upce':if((11<=n)&&(n<=12))return true;break;case 'Ean13':case 'Jan13':if((12<=n)&&(n<=13))return true;break;case 'Ean8':case 'Jan8':if((7<=n)&&(n<=8))return true;break;case 'Code39':case 'Itf':case 'Codabar':case 'Code93':case 'Code128':if((1<=n)&&(n<=255))return true;break;case 'Gs1DataBar':case 'Gs1DataBarTruncated':case 'Gs1DataBarLimited':if(n==13)return true;break;case 'Gs1DataBarExpanded':if((2<=n)&&(n<=255))return true;break;default:break;}return false;};CXMLPrint.prototype.PrintBarCode=function(vh,wh,xh,yh,zh,Ah){var s="";var Bh;var Ch;var Dh;var Eh;var Fh;if((vh!=undefined)&&(wh!=undefined)&&(xh!=undefined)&&(yh!=undefined)&&(zh!=undefined)&&(Ah!=undefined)&&isPrintBarCodeData(vh,wh)){s+="<Data>"+ya(wa(vh))+"</Data>";if(isNaN(wh)){Bh=Aa("Symbology",wh,ea);}else{Bh=Ja("Symbology",wh);}s+="<Symbology>"+Bh+"</Symbology>";Ch=Ma("Height",xh);Ch=Vb(Ch);s+="<Height>"+Ch+"</Height>";Dh=Ma("Width",yh);Dh=Vb(Dh);s+="<Width>"+Dh+"</Width>";if(isNaN(zh)){Eh=Aa("Alignment",zh,da);}else{Eh=Pa("Alignment",zh);Eh=Vb(Eh);}s+="<Alignment>"+Eh+"</Alignment>";if(isNaN(Ah)){Fh=Aa("TextPosition",Ah,ga);}else{Fh=Ja("TextPosition",Ah);}s+="<TextPosition>"+Fh+"</TextPosition>";this.message+="<PrintBarCode>"+s+"</PrintBarCode>";}else{throw new Error('PrintBarCode Element is invalid');}return this;};CXMLPrint.prototype.PrintPDF417=function(Gh,Hh,Ih,Jh,Kh,Lh,Mh){var s="";var Nh;var Oh;var Ph;if((Gh!=undefined)&&(Hh!=undefined)&&(Ih!=undefined)&&(Jh!=undefined)&&(Kh!=undefined)&&(Lh!=undefined)&&(Mh!=undefined)){s+="<Data>"+ya(wa(Gh))+"</Data>";s+="<Digits>"+Ja("Digits",Hh)+"</Digits>";s+="<Steps>"+Ja("Steps",Ih)+"</Steps>";Nh=Ma("ModuleWidth",Jh);Nh=Vb(Nh);s+="<ModuleWidth>"+Nh+"</ModuleWidth>";s+="<StepHeight>"+Ja("StepHeight",Kh)+"</StepHeight>";if(isNaN(Lh)){Oh=Aa("EcLevel",Lh,ha);}else{Oh=Ja("EcLevel",Lh);}s+="<EcLevel>"+Oh+"</EcLevel>";if(isNaN(Mh)){Ph=Aa("Alignment",Mh,da);}else{Ph=Pa("Alignment",Mh);Ph=Vb(Ph);}s+="<Alignment>"+Ph+"</Alignment>";this.message+="<PrintPDF417>"+s+"</PrintPDF417>";}else{throw new Error('PrintPDF417 Element is invalid');}return this;};CXMLPrint.prototype.PrintQRCode=function(Qh,Rh,Sh,Th){var s="";var Uh;var Vh;var Wh;if((Qh!=undefined)&&(Rh!=undefined)&&(Sh!=undefined)&&(Th!=undefined)){s+="<Data>"+ya(wa(Qh))+"</Data>";Vh=Ma("ModuleSize",Rh);Vh=Vb(Vh);s+="<ModuleSize>"+Vh+"</ModuleSize>";if(isNaN(Sh)){Uh=Aa("EcLevel",Sh,ia);}else{Uh=Ja("EcLevel",Sh);}s+="<EcLevel>"+Uh+"</EcLevel>";if(isNaN(Th)){Wh=Aa("Alignment",Th,da);}else{Wh=Pa("Alignment",Th);Wh=Vb(Wh);}s+="<Alignment>"+Wh+"</Alignment>";this.message+="<PrintQRCode>"+s+"</PrintQRCode>";}else{throw new Error('PrintQRCode Element is invalid');}return this;};CXMLPrint.prototype.PrintGS1DataBarStacked=function(Xh,Yh,Zh,$h,ai){var s="";var bi;var ci;var di;var ei;if((Xh!=undefined)&&(Yh!=undefined)&&(Zh!=undefined)&&($h!=undefined)&&(ai!=undefined)){s+="<Data>"+ya(wa(Xh))+"</Data>";if(isNaN(Yh)){bi=Aa("Symbology",Yh,fa);}else{bi=Ja("Symbology",Yh);}s+="<Symbology>"+bi+"</Symbology>";ci=Ma("ModuleSize",Zh);ci=Vb(ci);s+="<ModuleSize>"+ci+"</ModuleSize>";di=Sa("MaxSize",$h);di=Vb(di);s+="<MaxSize>"+di+"</MaxSize>";if(isNaN(ai)){ei=Aa("Alignment",ai,da);}else{ei=Pa("Alignment",ai);ei=Vb(ei);}s+="<Alignment>"+ei+"</Alignment>";this.message+="<PrintGS1DataBarStacked>"+s+"</PrintGS1DataBarStacked>";}else{throw new Error('PrintGS1DataBarStacked Element is invalid');}return this;};CXMLPrint.prototype.CutPaper=function(fi){var s="";var gi;if(fi!=undefined){if(isNaN(fi)){gi=Aa("Percentage",fi,na);}else{gi=Pa("Percentage",fi);}s+="<Percentage>"+gi+"</Percentage>";this.message+="<CutPaper>"+s+"</CutPaper>";}else{throw new Error('CutPaper Element is invalid');}return this;};CXMLPrint.prototype.UnitFeed=function(hi){var s="";var ii;if(hi!=undefined){ii=Ma("UfCount",hi);ii=Vb(ii);s+="<UfCount>"+ii+"</UfCount>";this.message+="<UnitFeed>"+s+"</UnitFeed>";}else{throw new Error('UnitFeed Element is invalid');}return this;};CXMLPrint.prototype.MarkFeed=function(ji){var s="";var ki;if(ji!=undefined){if(isNaN(ji)){ki=Aa("Type",ji,ma);}else{ki=Ja("Type",ji);}s+="<Type>"+ki+"</Type>";this.message+="<MarkFeed>"+s+"</MarkFeed>";}else{throw new Error('MarkFeed Element is invalid');}return this;};CXMLPrint.prototype.PageModePrint=function(li){var s="";var mi;if(li!=undefined){if(isNaN(li)){mi=Aa("Control",li,pa);}else{mi=Ja("Control",li);}s+="<Control>"+mi+"</Control>";this.message+="<PageModePrint>"+s+"</PageModePrint>";}else{throw new Error('PageModePrint Element is invalid');}return this;};CXMLPrint.prototype.SetPageModePrintArea=function(ni){var s="";if(ni!=undefined){var oi=ni.split(",");oi[0]=Ma("PageModePrintArea",oi[0]);oi[1]=Ma("PageModePrintArea",oi[1]);oi[2]=Ma("PageModePrintArea",oi[2]);oi[3]=Ma("PageModePrintArea",oi[3]);oi[0]=Vb(oi[0]);oi[1]=Vb(oi[1]);oi[2]=Vb(oi[2]);oi[3]=Vb(oi[3]);s+="<PageModePrintArea>"+oi[0]+","+oi[1]+","+oi[2]+","+oi[3]+"</PageModePrintArea>";this.message+="<SetPageModePrintArea>"+s+"</SetPageModePrintArea>";}else{throw new Error('SetPageModePrintArea Element is invalid');}return this;};CXMLPrint.prototype.SetPageModePrintDirection=function(pi){var s="";var qi;if(pi!=undefined){if(isNaN(pi)){qi=Aa("PageModePrintDirection",pi,ra);}else{qi=Ja("PageModePrintDirection",pi);}s+="<PageModePrintDirection>"+qi+"</PageModePrintDirection>";this.message+="<SetPageModePrintDirection>"+s+"</SetPageModePrintDirection>";}else{throw new Error('SetPageModePrintDirection Element is invalid');}va=pi;return this;};CXMLPrint.prototype.SetPageModeHorizontalPosition=function(ri){var s="";var si;if(ri!=undefined){si=Ma("PageModeHorizontalPosition",ri);si=Vb(si);s+="<PageModeHorizontalPosition>"+si+"</PageModeHorizontalPosition>";this.message+="<SetPageModeHorizontalPosition>"+s+"</SetPageModeHorizontalPosition>";}else{throw new Error('SetPageModeHorizontalPosition Element is invalid');}return this;};CXMLPrint.prototype.SetPageModeVerticalPosition=function(ti){var s="";var ui;if(ti!=undefined){ui=Ma("PageModeVerticalPosition",ti);ui=Vb(ui);s+="<PageModeVerticalPosition>"+ui+"</PageModeVerticalPosition>";this.message+="<SetPageModeVerticalPosition>"+s+"</SetPageModeVerticalPosition>";}else{throw new Error('SetPageModeVerticalPosition Element is invalid');}return this;};CXMLPrint.prototype.ClearPrintArea=function(){this.message+="<ClearPrintArea />";return this;};CXMLPrint.prototype.OpenDrawer=function(vi,wi){var s="";var xi;if((vi!=undefined)&&(wi!=undefined)){if(isNaN(vi)){xi=Aa("Drawer",vi,oa);}else{xi=Ja("Drawer",vi);}s+="<Drawer>"+xi+"</Drawer>";s+="<PulseLength>"+Ja("PulseLength",wi)+"</PulseLength>";this.message+="<OpenDrawer>"+s+"</OpenDrawer>";}else{throw new Error('OpenDrawer Element is invalid');}return this;};CXMLPrint.prototype.PrintData=function(yi){var s="";if(yi!=undefined){s+="<Data>"+ya(wa(yi))+"</Data>";this.message+="<PrintData>"+s+"</PrintData>";}else{throw new Error('PrintData Element is invalid');}return this;};CXMLPrint.prototype.ClearOutput=function(){this.message+="<ClearOutput />";return this;};CXMLPrint.prototype.RotatePrint=function(zi){var s="";if(zi!=undefined){s+="<Rotation>"+Ma("Rotation",zi)+"</Rotation>";this.message+="<RotatePrint>"+s+"</RotatePrint>";}else{throw new Error('RotatePrint Element is invalid');}return this;};CXMLPrint.prototype.SetRecLineSpacing=function(Ai){var s="";var Bi;if(Ai!=undefined){Bi=Ma("RecLineSpacing",Ai);Bi=Vb(Bi);s+="<RecLineSpacing>"+Bi+"</RecLineSpacing>";this.message+="<SetRecLineSpacing>"+s+"</SetRecLineSpacing>";}else{throw new Error('SetRecLineSpacing Element is invalid');}return this;};CXMLPrint.prototype.MessageID=function(Ci){if(Ci!=undefined){this.message+="<MessageID>"+Ci+"</MessageID>";}else{throw new Error('MessageID Element is invalid');}return this;};CXMLPrint.prototype.GetDeviceInfo=function(Di,Ei){var s="";if(Di){s+=" Name='"+Di+"'";}if(Ei){if(Ei==true){Ei='true';}s+=" Status='"+Ei+"'";}this.message+="<GetDeviceInfo"+s+" />";return this;};CXMLPrint.prototype.SetEncoding=function(Fi){var s="";if(Fi!=undefined){s+="<Encode>"+Fi+"</Encode>";this.message+="<SetEncoding>"+s+"</SetEncoding>";}else{throw new Error('SetEncoding Element is invalid');}return this;};CXMLPrint.prototype.SetCodePage=function(Gi){var s="";if(Gi!=undefined){s+="<CodePage>"+Gi+"</CodePage>";this.message+="<SetCodePage>"+s+"</SetCodePage>";}else{throw new Error('SetCodePage Element is invalid');}return this;};CXMLPrint.prototype.SetInternationalCharacterset=function(Hi){var s="";if(Hi!=undefined){s+="<Characterset>"+Hi+"</Characterset>";this.message+="<SetInternationalCharacterset>"+s+"</SetInternationalCharacterset>";}else{throw new Error('SetInternationalCharacterset Element is invalid');}return this;};CXMLPrint.prototype.GetPageModeArea=function(){var s=Xb(ta)+","+Xb(ua[1]);return s;};CXMLPrint.prototype.GetRecLineWidth=function(){var Ii=Xb(ta);return Ii;};CXMLPrint.prototype.SetRecLineWidth=function(Ji){ta=Vb(Ji);return this;};CXMLPrint.prototype.GetVersionCode=function(){return ba;};CXMLPrint.prototype.GetVersionName=function(){return ca;};if(!aa.citizen){aa.citizen={};}aa.citizen.CXMLPrint=CXMLPrint;})(window);